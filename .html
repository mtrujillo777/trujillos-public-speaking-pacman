<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Trujillo's Public Speaking Pac-Man</title>

<style>
  body {
    margin: 0;
    background: black;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
  }

  h1 {
    margin: 10px 0;
  }

  #gameWrapper {
    display: flex;
    justify-content: center;
    width: 100%;
  }

  canvas {
    background: black;
    border: 3px solid #1e90ff;
  }

  #startBtn {
    margin: 10px;
    padding: 12px 20px;
    font-size: 18px;
    cursor: pointer;
  }

  #controls {
    margin-top: 10px;
  }

  .control-row {
    display: flex;
    justify-content: center;
  }

  .btn {
    width: 60px;
    height: 60px;
    margin: 5px;
    font-size: 24px;
    background: #1e90ff;
    color: white;
    border: none;
    border-radius: 10px;
  }
</style>
</head>

<body>

<h1>üé§ Trujillo‚Äôs Public Speaking üé§</h1>

<button id="startBtn">Start Game</button>

<div id="gameWrapper">
  <canvas id="game"></canvas>
</div>

<div id="controls">
  <div class="control-row">
    <button class="btn" data-dir="up">‚¨ÜÔ∏è</button>
  </div>
  <div class="control-row">
    <button class="btn" data-dir="left">‚¨ÖÔ∏è</button>
    <button class="btn" data-dir="down">‚¨áÔ∏è</button>
    <button class="btn" data-dir="right">‚û°Ô∏è</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const ROWS = 21;
const COLS = 21;
let TILE_SIZE = 20;

function resizeCanvas() {
  const maxWidth = Math.min(window.innerWidth - 20, 420);
  TILE_SIZE = Math.floor(maxWidth / COLS);
  canvas.width = TILE_SIZE * COLS;
  canvas.height = TILE_SIZE * ROWS;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

/* 0 = pellet
   1 = wall
   2 = microphone (power pellet)
*/
const maze = [
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
[1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1],
[1,2,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1],
[1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1],
[1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1],
[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1],
[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1],
[1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1],
[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],
[1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1],
[1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],
[1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1],
[1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1],
[1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1],
[1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,2,1],
[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1],
[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
[1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1],
[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
];

let pacman = { x: 1, y: 1 };
let ghosts = [
  { x: 19, y: 1 },
  { x: 19, y: 19 }
];

let gameRunning = false;

function drawMaze() {
  for (let r = 0; r < ROWS; r++) {
    for (let c = 0; c < COLS; c++) {
      if (maze[r][c] === 1) {
        ctx.fillStyle = "#1e90ff";
        ctx.fillRect(c*TILE_SIZE, r*TILE_SIZE, TILE_SIZE, TILE_SIZE);
      }
      if (maze[r][c] === 0) {
        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.arc(
          c*TILE_SIZE + TILE_SIZE/2,
          r*TILE_SIZE + TILE_SIZE/2,
          TILE_SIZE/6,
          0,
          Math.PI*2
        );
        ctx.fill();
      }
      if (maze[r][c] === 2) {
        ctx.fillStyle = "gold";
        ctx.beginPath();
        ctx.arc(
          c*TILE_SIZE + TILE_SIZE/2,
          r*TILE_SIZE + TILE_SIZE/2,
          TILE_SIZE/3,
          0,
          Math.PI*2
        );
        ctx.fill();
      }
    }
  }
}

function drawPacman() {
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(
    pacman.x*TILE_SIZE + TILE_SIZE/2,
    pacman.y*TILE_SIZE + TILE_SIZE/2,
    TILE_SIZE/2.2,
    0,
    Math.PI*2
  );
  ctx.fill();
}

function drawGhosts() {
  ctx.fillStyle = "red";
  ghosts.forEach(g => {
    ctx.beginPath();
    ctx.arc(
      g.x*TILE_SIZE + TILE_SIZE/2,
      g.y*TILE_SIZE + TILE_SIZE/2,
      TILE_SIZE/2.2,
      0,
      Math.PI*2
    );
    ctx.fill();
  });
}

function movePacman(dx, dy) {
  const nx = pacman.x + dx;
  const ny = pacman.y + dy;
  if (maze[ny][nx] !== 1) {
    pacman.x = nx;
    pacman.y = ny;
    if (maze[ny][nx] !== 1) maze[ny][nx] = 3;
    moveGhosts();
    draw();
  }
}

function moveGhosts() {
  ghosts.forEach(g => {
    const dirs = [
      {x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}
    ];
    const d = dirs[Math.floor(Math.random()*dirs.length)];
    const nx = g.x + d.x;
    const ny = g.y + d.y;
    if (maze[ny][nx] !== 1) {
      g.x = nx;
      g.y = ny;
    }
  });
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawMaze();
  drawPacman();
  drawGhosts();
}

document.addEventListener("keydown", e => {
  if (!gameRunning) return;
  if (e.key === "ArrowUp") movePacman(0,-1);
  if (e.key === "ArrowDown") movePacman(0,1);
  if (e.key === "ArrowLeft") movePacman(-1,0);
  if (e.key === "ArrowRight") movePacman(1,0);
});

document.querySelectorAll(".btn").forEach(btn => {
  btn.addEventListener("click", () => {
    if (!gameRunning) return;
    const d = btn.dataset.dir;
    if (d === "up") movePacman(0,-1);
    if (d === "down") movePacman(0,1);
    if (d === "left") movePacman(-1,0);
    if (d === "right") movePacman(1,0);
  });
});

document.getElementById("startBtn").onclick = () => {
  gameRunning = true;
  draw();
};
</script>

</body>
</html>
