<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Trujillo's Public Speaking Pac-Man</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    background: black;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
  }

  h1 {
    margin: 8px 0;
    font-size: 22px;
  }

  #gameContainer {
    display: none;
    max-width: 420px;
    margin: auto;
  }

  canvas {
    width: 100%;
    height: auto;
    background: black;
    border: 3px solid #1e90ff;
  }

  #score {
    margin: 6px;
    font-size: 16px;
  }

  #message {
    height: 20px;
    font-size: 14px;
    color: gold;
  }

  #startBtn {
    padding: 12px 24px;
    font-size: 18px;
    background: gold;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }

  .ctrlRow {
    display: flex;
    justify-content: center;
  }

  .ctrlBtn {
    width: 60px;
    height: 60px;
    margin: 4px;
    font-size: 22px;
    border-radius: 10px;
    border: none;
    background: #333;
    color: white;
  }
</style>
</head>

<body>

<h1>üé§ Trujillo‚Äôs Public Speaking üé§</h1>
<button id="startBtn">Start Game</button>

<div id="gameContainer">
  <div id="score">Score: 0</div>
  <div id="message"></div>
  <canvas id="game"></canvas>

  <div>
    <div class="ctrlRow">
      <button class="ctrlBtn" onclick="movePacman(0,-1)">‚¨ÜÔ∏è</button>
    </div>
    <div class="ctrlRow">
      <button class="ctrlBtn" onclick="movePacman(-1,0)">‚¨ÖÔ∏è</button>
      <button class="ctrlBtn" onclick="movePacman(1,0)">‚û°Ô∏è</button>
    </div>
    <div class="ctrlRow">
      <button class="ctrlBtn" onclick="movePacman(0,1)">‚¨áÔ∏è</button>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const TILE = 20;
const ROWS = 21;
const COLS = 21;
canvas.width = COLS * TILE;
canvas.height = ROWS * TILE;

let score = 0;
let mouthOpen = true;
let powerTimer = 0;

const maze = [
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
[1,0,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1],
[1,2,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,2,1],
[1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1],
[1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1],
[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1],
[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1],
[1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1],
[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],
[1,1,1,0,1,1,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1],
[1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1],
[1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1],
[1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1],
[1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1],
[1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1],
[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1],
[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
[1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1],
[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

/* 0 = pellet
   1 = wall
   2 = microphone power-up
*/

let pacman = { x: 1, y: 1, dir: "right" };

let ghosts = [
  { x: 10, y: 9, color: "red" },
  { x: 9,  y: 10, color: "pink" },
  { x: 11, y: 10, color: "cyan" },
  { x: 10, y: 11, color: "orange" }
];

function showMessage(text) {
  const m = document.getElementById("message");
  m.innerText = text;
  setTimeout(() => m.innerText = "", 2000);
}

function movePacman(dx, dy) {
  const nx = pacman.x + dx;
  const ny = pacman.y + dy;

  if (maze[ny][nx] !== 1) {
    pacman.x = nx;
    pacman.y = ny;

    if (dx === 1) pacman.dir = "right";
    if (dx === -1) pacman.dir = "left";
    if (dy === -1) pacman.dir = "up";
    if (dy === 1) pacman.dir = "down";

    mouthOpen = !mouthOpen;

    if (maze[ny][nx] === 0) {
      score += 10;
    }

    if (maze[ny][nx] === 2) {
      score += 50;
      powerTimer = 15;
      showMessage("üé§ Public Speaking Power!");
    }

    maze[ny][nx] = 3;
    document.getElementById("score").innerText = "Score: " + score;

    moveGhosts();
    draw();
  }
}

function moveGhosts() {
  ghosts.forEach(g => {
    if (powerTimer > 0 && Math.random() < 0.5) return;

    const dirs = [
      {x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}
    ];
    const d = dirs[Math.floor(Math.random()*dirs.length)];
    const nx = g.x + d.x;
    const ny = g.y + d.y;

    if (maze[ny][nx] !== 1) {
      g.x = nx;
      g.y = ny;
    }
  });

  if (powerTimer > 0) powerTimer--;
}

function drawPacman() {
  const cx = pacman.x*TILE + TILE/2;
  const cy = pacman.y*TILE + TILE/2;
  const r = TILE/2.2;
  const m = mouthOpen ? 0.35 : 0.1;

  let s=0,e=Math.PI*2;
  if (pacman.dir==="right"){s=m*Math.PI;e=(2-m)*Math.PI;}
  if (pacman.dir==="left"){s=(1+m)*Math.PI;e=(1-m)*Math.PI;}
  if (pacman.dir==="up"){s=(1.5+m)*Math.PI;e=(1.5-m)*Math.PI;}
  if (pacman.dir==="down"){s=(0.5+m)*Math.PI;e=(0.5-m)*Math.PI;}

  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.moveTo(cx,cy);
  ctx.arc(cx,cy,r,s,e);
  ctx.fill();
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  for (let y=0;y<ROWS;y++) {
    for (let x=0;x<COLS;x++) {
      if (maze[y][x] === 1) {
        ctx.fillStyle = "#1e90ff";
        ctx.fillRect(x*TILE,y*TILE,TILE,TILE);
      }
      if (maze[y][x] === 0) {
        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.arc(x*TILE+TILE/2,y*TILE+TILE/2,3,0,7);
        ctx.fill();
      }
      if (maze[y][x] === 2) {
        ctx.font = "16px Arial";
        ctx.fillText("üé§", x*TILE+2, y*TILE+16);
      }
    }
  }

  ghosts.forEach(g => {
    ctx.fillStyle = powerTimer>0 ? "blue" : g.color;
    ctx.beginPath();
    ctx.arc(g.x*TILE+TILE/2,g.y*TILE+TILE/2,TILE/2.2,0,7);
    ctx.fill();
  });

  drawPacman();
}

document.getElementById("startBtn").onclick = () => {
  document.getElementById("startBtn").style.display = "none";
  document.getElementById("gameContainer").style.display = "block";
  draw();
};
</script>

</body>
</html>
