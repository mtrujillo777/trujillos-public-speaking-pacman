<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Trujillo's Public Speaking Pac-Man</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<style>
  body {
    margin: 0;
    background: black;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
  }

  h1 {
    margin: 10px 0;
    font-size: 22px;
  }

  #gameContainer {
    display: none;
    margin: auto;
    max-width: 360px;
  }

  canvas {
    background: black;
    width: 100%;
    height: auto;
    touch-action: none;
  }

  #score {
    margin: 8px;
    font-size: 16px;
  }

  #startBtn {
    padding: 12px 24px;
    font-size: 18px;
    background: gold;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }

  #controls {
    margin-top: 10px;
  }

  .ctrlRow {
    display: flex;
    justify-content: center;
  }

  .ctrlBtn {
    width: 60px;
    height: 60px;
    margin: 5px;
    font-size: 22px;
    border-radius: 10px;
    border: none;
    background: #333;
    color: white;
  }
</style>
</head>

<body>

<h1>üé§ Trujillo's Public Speaking</h1>
<button id="startBtn">Start Game</button>

<div id="gameContainer">
  <div id="score">Score: 0</div>
  <canvas id="game"></canvas>

  <div id="controls">
    <div class="ctrlRow">
      <button class="ctrlBtn" onclick="movePacman(0,-1)">‚¨ÜÔ∏è</button>
    </div>
    <div class="ctrlRow">
      <button class="ctrlBtn" onclick="movePacman(-1,0)">‚¨ÖÔ∏è</button>
      <button class="ctrlBtn" onclick="movePacman(1,0)">‚û°Ô∏è</button>
    </div>
    <div class="ctrlRow">
      <button class="ctrlBtn" onclick="movePacman(0,1)">‚¨áÔ∏è</button>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const TILE = 20;
const ROWS = 21;
const COLS = 21;
canvas.width = COLS * TILE;
canvas.height = ROWS * TILE;

let score = 0;
let mouthOpen = true;

const maze = [
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1],
[1,2,1,1,1,2,1,1,2,1,2,1,1,2,1,1,2,1,1,2,1],
[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
[1,2,1,1,2,1,1,2,1,1,1,1,1,2,1,1,2,1,1,2,1],
[1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1],
[1,1,1,1,1,2,1,1,2,1,2,1,1,2,1,1,2,1,1,1,1],
[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
[1,2,1,1,2,1,1,2,1,1,1,1,1,2,1,1,2,1,1,2,1],
[1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1],
[1,1,1,1,1,1,1,1,2,1,2,1,1,2,1,1,1,1,1,1,1],
[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
[1,2,1,1,2,1,1,2,1,1,1,1,1,2,1,1,2,1,1,2,1],
[1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1],
[1,1,1,1,1,2,1,1,2,1,2,1,1,2,1,1,2,1,1,1,1],
[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
[1,2,1,1,2,1,1,2,1,1,1,1,1,2,1,1,2,1,1,2,1],
[1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1],
[1,2,1,1,1,1,1,1,2,1,2,1,1,2,1,1,1,1,1,2,1],
[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
];

let pacman = {x:1,y:1,dir:"right"};
let ghosts = [{x:19,y:19},{x:1,y:19}];

function playSound() {
  const a = new AudioContext();
  const o = a.createOscillator();
  o.frequency.value = 600;
  o.connect(a.destination);
  o.start();
  setTimeout(()=>o.stop(),80);
}

function movePacman(dx,dy){
  const nx=pacman.x+dx, ny=pacman.y+dy;
  if(maze[ny][nx]!==1){
    pacman.x=nx; pacman.y=ny;
    pacman.dir = dx===1?"right":dx===-1?"left":dy===-1?"up":"down";
    mouthOpen=!mouthOpen;
    if(maze[ny][nx]===2){
      score+=10;
      document.getElementById("score").innerText="Score: "+score;
      playSound();
    }
    maze[ny][nx]=0;
    moveGhosts();
    draw();
  }
}

function moveGhosts(){
  ghosts.forEach(g=>{
    const dirs=[[1,0],[-1,0],[0,1],[0,-1]];
    const d=dirs[Math.floor(Math.random()*4)];
    if(maze[g.y+d[1]][g.x+d[0]]!==1){
      g.x+=d[0]; g.y+=d[1];
    }
  });
}

function drawPacman(){
  const cx=pacman.x*TILE+TILE/2;
  const cy=pacman.y*TILE+TILE/2;
  const r=TILE/2;
  let m=mouthOpen?0.35:0.1;
  let s=0,e=Math.PI*2;
  if(pacman.dir==="right"){s=m*Math.PI;e=(2-m)*Math.PI;}
  if(pacman.dir==="left"){s=(1+m)*Math.PI;e=(1-m)*Math.PI;}
  if(pacman.dir==="up"){s=(1.5+m)*Math.PI;e=(1.5-m)*Math.PI;}
  if(pacman.dir==="down"){s=(0.5+m)*Math.PI;e=(0.5-m)*Math.PI;}
  ctx.fillStyle="yellow";
  ctx.beginPath();ctx.moveTo(cx,cy);ctx.arc(cx,cy,r,s,e);ctx.fill();
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  maze.forEach((row,y)=>row.forEach((c,x)=>{
    if(c===1){ctx.fillStyle="blue";ctx.fillRect(x*TILE,y*TILE,TILE,TILE);}
    if(c===2){ctx.fillStyle="white";ctx.beginPath();ctx.arc(x*TILE+TILE/2,y*TILE+TILE/2,3,0,7);ctx.fill();}
  }));
  ghosts.forEach(g=>{
    ctx.fillStyle="red";
    ctx.beginPath();ctx.arc(g.x*TILE+TILE/2,g.y*TILE+TILE/2,TILE/2,0,7);ctx.fill();
  });
  drawPacman();
}

document.getElementById("startBtn").onclick=()=>{
  document.getElementById("startBtn").style.display="none";
  document.getElementById("gameContainer").style.display="block";
  draw();
};
</script>
</body>
</html>
